% Base del conocimiento.
% id/1.
%
% Líneas del metro existentes.

id(1).
id(2).
id(3).
id(4).
id(5).
id(6).
id(7).
id(8).
id(9).
id(10).
id(11).
id(12).

% Color distintivo de cada línea.

color(1,rosa).
color(2,azul).
color(3,verde_oliva).
color(4,verde_azulado).
color(5,amarillo).
color(6,rojo).
color(7,naranja).
color(8,verde).
color(9,cafe).
color(10,morado).
color(11,verde_gris).
color(12,dorado).

% Terminales de cada línea.

terminal(1,observatorio).
terminal(1,pantitlan).
terminal(2,cuatro_caminos).
terminal(2,tasquena).
terminal(3,universidad).
terminal(3,indios_verdes).
terminal(4,martin_carrera).
terminal(4,santa_anita).
terminal(5,pantitlan).
terminal(5,politecnico).
terminal(6,martin_carrera).
terminal(6,el_rosario).
terminal(7,el_rosario).
terminal(7,barranca_del_muerto).
terminal(8,garibaldi_lagunilla).
terminal(8,constitucion_de_1917).
terminal(9,pantitlan).
terminal(9,tacubaya).
terminal(10,pantitlan).
terminal(10,la_paz).
terminal(11,ciudad_azteca).
terminal(11,buenavista).
terminal(12,mixcoac).
terminal(12,tlahuac).


% Estaciones de cada línea.

estacion(observatorio,1).
estacion(tacubaya,1).
estacion(juanacatlan,1).
estacion(chapultepec,1).
estacion(sevilla,1).
estacion(insurgentes,1).
estacion(cuauhtemoc,1).
estacion(balderas,1).
estacion(salto_del_agua,1).
estacion(isabel_la_catolica,1).
estacion(pino_suarez,1).
estacion(merced,1).
estacion(candelaria,1).
estacion(san_lazaro,1).
estacion(moctezuma,1).
estacion(balbuena,1).
estacion(boulevard_puerto_aereo,1).
estacion(gomez_farias,1).
estacion(zaragoza,1).
estacion(pantitlan,1).

estacion(cuatro_caminos,2).
estacion(panteones,2).
estacion(tacuba,2).
estacion(cuitlahuac,2).
estacion(popotla,2).
estacion(colegio_militar,2).
estacion(normal,2).
estacion(san_cosme,2).
estacion(revolucion,2).
estacion(hidalgo,2).
estacion(bellas_artes,2).
estacion(allende,2).
estacion(zocalo,2).
estacion(pino_suarez,2).
estacion(san_antonio_abad,2).
estacion(chabacano,2).
estacion(viaducto,2).
estacion(xola,2).
estacion(villa_de_cortes,2).
estacion(nativitas,2).
estacion(portales,2).
estacion(ermita,2).
estacion(general_anaya,2).
estacion(tasquena,2).

estacion(universidad,3).
estacion(copilco,3).
estacion(miguel_angel_de_quevedo,3).
estacion(viveros_derechos_humanos,3).
estacion(coyoacan,3).
estacion(zapata,3).
estacion(division_del_norte,3).
estacion(eugenia,3).
estacion(etiopia_plaza_de_la_transparencia,3).
estacion(centro_medico,3).
estacion(hospital_general,3).
estacion(ninos_heroes,3).
estacion(balderas,3).
estacion(juarez,3).
estacion(hidalgo,3).
estacion(guerrero,3).
estacion(tlatelolco,3).
estacion(la_raza,3).
estacion(potrero,3).
estacion(deportivo_18_de_marzo,3).
estacion(indios_verdes,3).

estacion(martin_carrera,4).
estacion(talisman,4).
estacion(bondojito,4).
estacion(consulado,4).
estacion(canal_del_norte,4).
estacion(morelos,4).
estacion(candelaria,4).
estacion(fray_servando,4).
estacion(jamaica,4).
estacion(santa_anita,4).

estacion(pantitlan,5).
estacion(hangares,5).
estacion(terminal_aerea,5).
estacion(oceania,5).
estacion(aragon,5).
estacion(eduardo_molina,5).
estacion(consulado,5).
estacion(valle_gomez,5).
estacion(misterios,5).
estacion(la_raza,5).
estacion(autobuses_del_norte,5).
estacion(instituto_del_petroleo,5).
estacion(politecnico,5).

estacion(martin_carrera,6).
estacion(la_villa_basilica,6).
estacion(deportivo_18_de_marzo,6).
estacion(lindavista,6).
estacion(instituto_del_petroleo,6).
estacion(vallejo,6).
estacion(norte_45,6).
estacion(ferreria_arena_ciudad_de_mexico,6).
estacion(azcapotzalco,6).
estacion(tezozomoc,6).
estacion(el_rosario,6).

estacion(el_rosario,7).
estacion(aquiles_serdan,7).
estacion(camarones,7).
estacion(refineria,7).
estacion(tacuba,7).
estacion(san_joaquin,7).
estacion(polanco,7).
estacion(auditorio,7).
estacion(constituyentes,7).
estacion(tacubaya,7).
estacion(san_pedro_de_los_pinos,7).
estacion(san_antonio,7).
estacion(mixcoac,7).
estacion(barranca_del_muerto,7).

estacion(garibaldi_lagunilla,8).
estacion(bellas_artes,8).
estacion(san_juan_de_letran,8).
estacion(salto_del_agua,8).
estacion(doctores,8).
estacion(obrera,8).
estacion(chabacano,8).
estacion(la_viga,8).
estacion(santa_anita,8).
estacion(coyuya,8).
estacion(iztacalco,8).
estacion(apatlaco,8).
estacion(aculco,8).
estacion(escuadron_201,8).
estacion(atlililco,8).
estacion(iztapalapa,8).
estacion(cerro_de_la_estrella,8).
estacion(uam_i,8).
estacion(constitucion_de_1917,8).

estacion(pantitlan,9).
estacion(puebla,9).
estacion(ciudad_deportiva,9).
estacion(velodromo,9).
estacion(mixiuhca,9).
estacion(jamaica,9).
estacion(chabacano,9).
estacion(lazaro_cardenas,9).
estacion(centro_medico,9).
estacion(chilpancingo,9).
estacion(patriotismo,9).
estacion(tacubaya,9).

estacion(pantitlan,10).
estacion(agricola_oriental,10).
estacion(canal_de_san_juan,10).
estacion(tepalcates,10).
estacion(guelatao,10).
estacion(penon_viejo,10).
estacion(acatitla,10).
estacion(santa_marta,10).
estacion(los_reyes,10).
estacion(la_paz,10).

estacion(cuidad_azteca,11).
estacion(plaza_aragon,11).
estacion(olimpia,11).
estacion(ecatepec,11).
estacion(muzquiz,11).
estacion(rio_de_los_remedios,11).
estacion(impulsora,11).
estacion(nezahualcoyotl,11).
estacion(villa_de_aragon,11).
estacion(bosque_de_aragon,11).
estacion(deportivo_oceania,11).
estacion(oceania,11).
estacion(romero_rubio,11).
estacion(flores_magon,11).
estacion(san_lazaro,11).
estacion(morelos,11).
estacion(tepito,11).
estacion(lagunilla,11).
estacion(garibaldi_lagunilla,11).
estacion(guerrero,11).
estacion(buenavista,11).

estacion(mixcoac,12).
estacion(insurgentes_sur,12).
estacion(hospital_20_de_noviembre,12).
estacion(zapata,12).
estacion(parque_de_los_venados,12).
estacion(eje_central,12).
estacion(ermita,12).
estacion(mexicaltzingo,12).
estacion(atlalilco,12).
estacion(culhuacan,12).
estacion(san_andres_tomatlan,12).
estacion(lomas_estrella,12).
estacion(calle_11,12).
estacion(periferico_oriente,12).
estacion(tezonco,12).
estacion(olivos,12).
estacion(nopalera,12).
estacion(zapotitlan,12).
estacion(tlaltenco,12).
estacion(tlahuac,12).


% Conexiones entre estaciones.
% Los primeros dos parámetros representan las estaciones conectadas.
% El tercer parámetro indica el costo de la primera estación a la segunda
% estación.
% El costo fue calculado al azar con valores de 5,10,20 o 25

conecta(observatorio,tacubaya,25).
conecta(tacubaya,observatorio,5).
conecta(tacubaya,juanacatlan,10).
conecta(juanacatlan,tacubaya,25).
conecta(juanacatlan,chapultepec,10).
conecta(chapultepec,juanacatlan,10).
conecta(chapultepec,sevilla,10).
conecta(sevilla,chapultepec,10).
conecta(sevilla,insurgentes,10).
conecta(insurgentes,sevilla,10).
conecta(insurgentes,cuauhtemoc,10).
conecta(cuauhtemoc,insurgentes,10).
conecta(cuauhtemoc,balderas,20).
conecta(balderas,cuauhtemoc,10).
conecta(balderas,salto_del_agua,20).
conecta(salto_del_agua,balderas,20).
conecta(salto_del_agua,isabel_la_catolica,10).
conecta(isabel_la_catolica,salto_del_agua,20).
conecta(isabel_la_catolica,pino_suarez,20).
conecta(pino_suarez,isabel_la_catolica,10).
conecta(pino_suarez,merced,10).
conecta(merced,pino_suarez,20).
conecta(merced,candelaria,20).
conecta(candelaria,merced,10).
conecta(candelaria,san_lazaro,20).
conecta(san_lazaro,candelaria,20).
conecta(san_lazaro,moctezuma,10).
conecta(moctezuma,san_lazaro,20).
conecta(moctezuma,balbuena,10).
conecta(balbuena,moctezuma,10).
conecta(balbuena,boulevard_puerto_aereo,10).
conecta(boulevard_puerto_aereo,balbuena,10).
conecta(boulevard_puerto_aereo,gomez_farias,10).
conecta(gomez_farias,boulevard_puerto_aereo,10).
conecta(gomez_farias,zaragoza,10).
conecta(zaragoza,gomez_farias,10).
conecta(zaragoza,pantitlan,20).
conecta(pantitlan,zaragoza,10).

conecta(cuatro_caminos,panteones,10).
conecta(panteones,cuatro_caminos,5).
conecta(panteones,tacuba,20).
conecta(tacuba,panteones,10).
conecta(tacuba,cuitlahuac,10).
conecta(cuitlahuac,tacuba,20).
conecta(cuitlahuac,popotla,10).
conecta(popotla,cuitlahuac,10).
conecta(popotla,colegio_militar,10).
conecta(colegio_militar,popotla,10).
conecta(colegio_militar,normal,10).
conecta(normal,colegio_militar,10).
conecta(normal,san_cosme,10).
conecta(san_cosme,normal,10).
conecta(san_cosme,revolucion,10).
conecta(revolucion,san_cosme,10).
conecta(revolucion,hidalgo,20).
conecta(hidalgo,revolucion,10).
conecta(hidalgo,bellas_artes,20).
conecta(bellas_artes,hidalgo,20).
conecta(bellas_artes,allende,10).
conecta(allende,bellas_artes,20).
conecta(allende,zocalo,10).
conecta(zocalo,allende,10).
conecta(zocalo,pino_suarez,20).
conecta(pino_suarez,zocalo,10).
conecta(pino_suarez,san_antonio_abad,10).
conecta(san_antonio_abad,pino_suarez,20).
conecta(san_antonio_abad,chabacano,30).
conecta(chabacano,san_antonio_abad,10).
conecta(chabacano,viaducto,10).
conecta(viaducto,chabacano,30).
conecta(viaducto,xola,10).
conecta(xola,viaducto,10).
conecta(xola,villa_de_cortes,10).
conecta(villa_de_cortes,xola,10).
conecta(villa_de_cortes,nativitas,10).
conecta(nativitas,villa_de_cortes,10).
conecta(nativitas,portales,10).
conecta(portales,nativitas,10).
conecta(portales,ermita,20).
conecta(ermita,portales,10).
conecta(ermita,general_anaya,10).
conecta(general_anaya,ermita,20).
conecta(general_anaya,tasquena,5).
conecta(tasquena,general_anaya,10).

conecta(universidad,copilco,10).
conecta(copilco,universidad,5).
conecta(copilco,miguel_angel_de_quevedo,10).
conecta(miguel_angel_de_quevedo,copilco,10).
conecta(miguel_angel_de_quevedo,viveros_derechos_humanos,10).
conecta(viveros_derechos_humanos,miguel_angel_de_quevedo,10).
conecta(viveros_derechos_humanos,coyoacan,10).
conecta(coyoacan,viveros_derechos_humanos,10).
conecta(coyoacan,zapata,20).
conecta(zapata,coyoacan,10).
conecta(zapata,division_del_norte,10).
conecta(division_del_norte,zapata,20).
conecta(division_del_norte,eugenia,10).
conecta(eugenia,division_del_norte,10).
conecta(eugenia,etiopia_plaza_de_la_transparencia,10).
conecta(etiopia_plaza_de_la_transparencia,eugenia,10).
conecta(etiopia_plaza_de_la_transparencia,centro_medico,20).
conecta(centro_medico,etiopia_plaza_de_la_transparencia,10).
conecta(centro_medico,hospital_general,10).
conecta(hospital_general,centro_medico,20).
conecta(hospital_general,ninos_heroes,10).
conecta(ninos_heroes,hospital_general,10).
conecta(ninos_heroes,balderas,20).
conecta(balderas,ninos_heroes,10).
conecta(balderas,juarez,10).
conecta(juarez,balderas,20).
conecta(juarez,hidalgo,20).
conecta(hidalgo,juarez,10).
conecta(hidalgo,guerrero,20).
conecta(guerrero,hidalgo,20).
conecta(guerrero,tlatelolco,10).
conecta(tlatelolco,guerrero,20).
conecta(tlatelolco,la_raza,20).
conecta(la_raza,tlatelolco,10).
conecta(la_raza,potrero,10).
conecta(potrero,la_raza,20).
conecta(potrero,deportivo_18_de_marzo,20).
conecta(deportivo_18_de_marzo,potrero,10).
conecta(deportivo_18_de_marzo,indios_verdes,5).
conecta(indios_verdes,deportivo_18_de_marzo,20).

conecta(martin_carrera,talisman,10).
conecta(talisman,martin_carrera,10).
conecta(talisman,bondojito,10).
conecta(bondojito,talisman,10).
conecta(bondojito,consulado,20).
conecta(consulado,bondojito,10).
conecta(consulado,canal_del_norte,10).
conecta(canal_del_norte,consulado,20).
conecta(canal_del_norte,morelos,20).
conecta(morelos,canal_del_norte,10).
conecta(morelos,candelaria,20).
conecta(candelaria,morelos,20).
conecta(candelaria,fray_servando,10).
conecta(fray_servando,candelaria,20).
conecta(fray_servando,jamaica,20).
conecta(jamaica,fray_servando,10).
conecta(jamaica,santa_anita,15).
conecta(santa_anita,jamaica,20).

conecta(pantitlan,hangares,10).
conecta(hangares,pantitlan,20).
conecta(hangares,terminal_aerea,10).
conecta(terminal_aerea,hangares,10).
conecta(terminal_aerea,oceania,20).
conecta(oceania,terminal_aerea,10).
conecta(oceania,aragon,10).
conecta(aragon,oceania,20).
conecta(aragon,eduardo_molina,10).
conecta(eduardo_molina,aragon,10).
conecta(eduardo_molina,consulado,20).
conecta(consulado,eduardo_molina,10).
conecta(consulado,valle_gomez,10).
conecta(valle_gomez,consulado,20).
conecta(valle_gomez,misterios,10).
conecta(misterios,valle_gomez,10).
conecta(misterios,la_raza,20).
conecta(la_raza,misterios,10).
conecta(la_raza,autobuses_del_norte,10).
conecta(autobuses_del_norte,la_raza,20).
conecta(autobuses_del_norte,instituto_del_petroleo,20).
conecta(instituto_del_petroleo,autobuses_del_norte,10).
conecta(instituto_del_petroleo,politecnico,5).
conecta(politecnico,instituto_del_petroleo,20).

conecta(martin_carrera,la_villa_basilica,10).
conecta(la_villa_basilica,martin_carrera,10).
conecta(la_villa_basilica,deportivo_18_de_marzo,20).
conecta(deportivo_18_de_marzo,la_villa_basilica,10).
conecta(deportivo_18_de_marzo,lindavista,10).
conecta(lindavista,deportivo_18_de_marzo,20).
conecta(lindavista,instituto_del_petroleo,20).
conecta(instituto_del_petroleo,lindavista,10).
conecta(instituto_del_petroleo,vallejo,10).
conecta(vallejo,instituto_del_petroleo,20).
conecta(vallejo,norte_45,10).
conecta(norte_45,vallejo,10).
conecta(norte_45,ferreria_arena_ciudad_de_mexico,10).
conecta(ferreria_arena_ciudad_de_mexico,norte_45,10).
conecta(ferreria_arena_ciudad_de_mexico,azcapotzalco,10).
conecta(azcapotzalco,ferreria_arena_ciudad_de_mexico,10).
conecta(azcapotzalco,tezozomoc,10).
conecta(tezozomoc,azcapotzalco,10).
conecta(tezozomoc,el_rosario,10).
conecta(el_rosario,tezozomoc,10).

conecta(el_rosario,aquiles_serdan,10).
conecta(aquiles_serdan,el_rosario,10).
conecta(aquiles_serdan,camarones,10).
conecta(camarones,aquiles_serdan,10).
conecta(camarones,refineria,10).
conecta(refineria,camarones,10).
conecta(refineria,tacuba,20).
conecta(tacuba,refineria,10).
conecta(tacuba,san_joaquin,10).
conecta(san_joaquin,tacuba,20).
conecta(san_joaquin,polanco,10).
conecta(polanco,san_joaquin,10).
conecta(polanco,auditorio,10).
conecta(auditorio,polanco,10).
conecta(auditorio,constituyentes,10).
conecta(constituyentes,auditorio,10).
conecta(constituyentes,tacubaya,25).
conecta(tacubaya,constituyentes,10).
conecta(tacubaya,san_pedro_de_los_pinos,10).
conecta(san_pedro_de_los_pinos,tacubaya,25).
conecta(san_pedro_de_los_pinos,san_antonio,10).
conecta(san_antonio,san_pedro_de_los_pinos,10).
conecta(san_antonio,mixcoac,15).
conecta(mixcoac,san_antonio,10).
conecta(mixcoac,barranca_del_muerto,5).
conecta(barranca_del_muerto,mixcoac,15).

conecta(garibaldi_lagunilla,bellas_artes,20).
conecta(bellas_artes,garibaldi_lagunilla,15).
conecta(bellas_artes,san_juan_de_letran,10).
conecta(san_juan_de_letran,bellas_artes,20).
conecta(san_juan_de_letran,salto_del_agua,20).
conecta(salto_del_agua,san_juan_de_letran,10).
conecta(salto_del_agua,doctores,10).
conecta(doctores,salto_del_agua,20).
conecta(doctores,obrera,10).
conecta(obrera,doctores,10).
conecta(obrera,chabacano,30).
conecta(chabacano,obrera,10).
conecta(chabacano,la_viga,10).
conecta(la_viga,chabacano,30).
conecta(la_viga,santa_anita,15).
conecta(santa_anita,la_viga,10).
conecta(santa_anita,coyuya,10).
conecta(coyuya,santa_anita,15).
conecta(coyuya,iztacalco,10).
conecta(iztacalco,coyuya,10).
conecta(iztacalco,apatlaco,10).
conecta(apatlaco,iztacalco,10).
conecta(apatlaco,aculco,10).
conecta(aculco,apatlaco,10).
conecta(aculco,escuadron_201,10).
conecta(escuadron_201,aculco,10).
conecta(escuadron_201,atlalilco,20).
conecta(atlalilco,escuadron_201,10).
conecta(atlalilco,iztapalapa,10).
conecta(iztapalapa,atlalilco,20).
conecta(iztapalapa,cerro_de_la_estrella,10).
conecta(cerro_de_la_estrella,iztapalapa,10).
conecta(cerro_de_la_estrella,uam_i,10).
conecta(uam_i,cerro_de_la_estrella,10).
conecta(uam_i,constitucion_de_1917,5).
conecta(constitucion_de_1917,uam_i,10).

conecta(pantitlan,puebla,10).
conecta(puebla,pantitlan,20).
conecta(puebla,ciudad_deportiva,10).
conecta(ciudad_deportiva,puebla,10).
conecta(ciudad_deportiva,velodromo,10).
conecta(velodromo,ciudad_deportiva,10).
conecta(velodromo,mixiuhca,10).
conecta(mixiuhca,velodromo,10).
conecta(mixiuhca,jamaica,20).
conecta(jamaica,mixiuhca,10).
conecta(jamaica,chabacano,30).
conecta(chabacano,jamaica,20).
conecta(chabacano,lazaro_cardenas,10).
conecta(lazaro_cardenas,chabacano,30).
conecta(lazaro_cardenas,centro_medico,20).
conecta(centro_medico,lazaro_cardenas,10).
conecta(centro_medico,chilpancingo,10).
conecta(chilpancingo,centro_medico,20).
conecta(chilpancingo,patriotismo,10).
conecta(patriotismo,chilpancingo,10).
conecta(patriotismo,tacubaya,25).
conecta(tacubaya,patriotismo,10).

conecta(pantitlan,agricola_oriental,10).
conecta(agricola_oriental,pantitlan,20).
conecta(agricola_oriental,canal_de_san_juan,10).
conecta(canal_de_san_juan,agricola_oriental,10).
conecta(canal_de_san_juan,tepalcates,10).
conecta(tepalcates,canal_de_san_juan,10).
conecta(tepalcates,guelatao,10).
conecta(guelatao,tepalcates,10).
conecta(guelatao,penon_viejo,10).
conecta(penon_viejo,guelatao,10).
conecta(penon_viejo,acatitla,10).
conecta(acatitla,penon_viejo,10).
conecta(acatitla,santa_marta,10).
conecta(santa_marta,acatitla,10).
conecta(santa_marta,los_reyes,10).
conecta(los_reyes,santa_marta,10).
conecta(los_reyes,la_paz,5).
conecta(la_paz,los_reyes,10).

conecta(ciudad_azteca,plaza_aragon,10).
conecta(plaza_aragon,ciudad_azteca,5).
conecta(plaza_aragon,olimpia,10).
conecta(olimpia,plaza_aragon,10).
conecta(olimpia,ecatepec,10).
conecta(ecatepec,olimpia,10).
conecta(ecatepec,muzquiz,10).
conecta(muzquiz,ecatepec,10).
conecta(muzquiz,rio_de_los_remedios,10).
conecta(rio_de_los_remedios,muzquiz,10).
conecta(rio_de_los_remedios,impulsora,10).
conecta(impulsora,rio_de_los_remedios,10).
conecta(impulsora,nezahualcoyotl,10).
conecta(nezahualcoyotl,impulsora,10).
conecta(nezahualcoyotl,villa_de_aragon,10).
conecta(villa_de_aragon,nezahualcoyotl,10).
conecta(villa_de_aragon,bosque_de_aragon,10).
conecta(bosque_de_aragon,villa_de_aragon,10).
conecta(bosque_de_aragon,deportivo_oceania,10).
conecta(deportivo_oceania,bosque_de_aragon,10).
conecta(deportivo_oceania,oceania,20).
conecta(oceania,deportivo_oceania,10).
conecta(oceania,romero_rubio,10).
conecta(romero_rubio,oceania,20).
conecta(romero_rubio,flores_magon,10).
conecta(flores_magon,romero_rubio,10).
conecta(flores_magon,san_lazaro,20).
conecta(san_lazaro,flores_magon,10).
conecta(san_lazaro,morelos,20).
conecta(morelos,san_lazaro,20).
conecta(san_lazaro,morelos,20).
conecta(morelos,san_lazaro,20).
conecta(morelos,tepito,10).
conecta(tepito,morelos,20).
conecta(tepito,lagunilla,10).
conecta(lagunilla,tepito,10).
conecta(lagunilla,garibaldi_lagunilla,15).
conecta(garibaldi_lagunilla,lagunilla,10).
conecta(garibaldi_lagunilla,guerrero,20).
conecta(guerrero,garibaldi_lagunilla,15).
conecta(guerrero,buenavista,5).
conecta(buenavista,guerrero,20).

conecta(mixcoac,insurgentes_sur,10).
conecta(insurgentes_sur,mixcoac,15).
conecta(insurgentes_sur,hospital_20_de_noviembre,10).
conecta(hospital_20_de_noviembre,insurgentes_sur,10).
conecta(hospital_20_de_noviembre,zapata,20).
conecta(zapata,hospital_20_de_noviembre,10).
conecta(zapata,parque_de_los_venados,10).
conecta(parque_de_los_venados,zapata,20).
conecta(parque_de_los_venados,eje_central,10).
conecta(eje_central,parque_de_los_venados,10).
conecta(eje_central,ermita,20).
conecta(ermita,eje_central,10).
conecta(ermita,mexicaltzingo,10).
conecta(mexicaltzingo,ermita,20).
conecta(mexicaltzingo,atlalilco,20).
conecta(atlalilco,mexicaltzingo,10).
conecta(atlalilco,culhuacan,10).
conecta(culhuacan,atlalilco,20).
conecta(culhuacan,san_andres_tomatlan,10).
conecta(san_andres_tomatlan,culhuacan,10).
conecta(san_andres_tomatlan,lomas_estrella,10).
conecta(lomas_estrella,san_andres_tomatlan,10).
conecta(lomas_estrella,calle_11,10).
conecta(calle_11,lomas_estrella,10).
conecta(calle_11,periferico_oriente,10).
conecta(periferico_oriente,calle_11,10).
conecta(periferico_oriente,tezonco,10).
conecta(tezonco,periferico_oriente,10).
conecta(tezonco,olivos,10).
conecta(olivos,tezonco,10).
conecta(olivos,nopalera,10).
conecta(nopalera,olivos,10).
conecta(nopalera,zapotitlan,10).
conecta(zapotitlan,nopalera,10).
conecta(zapotitlan,tlaltenco,10).
conecta(tlaltenco,zapotitlan,10).
conecta(tlaltenco,tlahuac,5).
conecta(tlahuac,tlaltenco,10).



% Indica el primer primer elemento de una lista.
% El primer parámetro es una lista.
% El segundo es el primer elemento de la lista.

primer_elemento([P|_],P).



% Busca que la última y penúltima estación pertenecen a la misma línea,
% de no ser así, incrementa 1 mín. el costol
% Los primeros 2 parámetros indican las estaciones a analizar.
% Los siguientes 2 paramatros son el costo calculado hasta ahora y el
% costo ingrementado de la nueva estación.
% El último parámetro es el costo total.


costo(E1,E2,C1,C2,Costo):- (estacion(E1,L), estacion(E2,L))-> Costo is C1+C2;
                                                              Costo is C1+C2+1.


% Ayuda al predicado ruta/4 a encontrar una ruta para llegar de una
% estación a otra.
% Los primeros 2 parámetros indican la estación desde donde se parte y
% la estación a la que se quiere llegar.
% El tercer parámetro son las estaciones visitadas.
% El cuarto parámetro es la ruta que se va generando.
% El último parámetro es el costo de la ruta generada.

navegar(A,A,_,[A],0):- !.
navegar(A,B,Visitado,[B|Visitado],Costo):- conecta(A,B,Costo).
navegar(A,B,Visitado,Ruta,Costo):- conecta(A,Z,C1),
                                   \+ member(Z,Visitado),
                                   Z \== B,
                                   navegar(Z,B,[Z|Visitado],Ruta,C2),
                                   primer_elemento(Visitado,X),
                                   primer_elemento(Ruta,Y),
                                   costo(X,Y,C1,C2,Costo).


% Establece las posibles rutas y sus costos para ir de una estación a
% otra.
% El primer parámetro es la estación de la que se quiere partir.
% El segundo parámetro es la estación a la que se quiere llegar.
% El tercer parámetro es la ruta recorrida hasta llegar a la estación
% establecida.
% El cuarto parámetro es el costo de la ruta recorrida

ruta(A,B,Ruta,Costo):- navegar(A,B,[A],R,Costo),
                       reverse(R,Ruta).

% Recopila todas las posibles rutas entre dos estaciones.
% Los primeros dos parámetros son las estaciones de partida y llegada.
% El tercer parámetro es una lista con las rutas para llegar al destido
% y el costo de cada ruta separado por un guion. Por ejemplo [[a,b,c]-3].

calcula_rutas(A,B,Rutas):- findall(R-C,ruta(A,B,R,C),Rutas).



% Dada una lista de rutas con el costo de cada ruta, este predicado nos
% devuelve una lista con las rutas de menor costo y el costo que estas
% tienen.
% El primer parámetro es la lista de rutas y costos separados por un
% guion.
% El segundo parámetro es la lista de rutas con menor costo.
% El tercer parámetro es el menor costo que se puede encontrar.
% Usamos 'menor o igual' y 'mayor o igual' debido a que pueden existir
% rutas con el mismo costo pero diferentes.


ruta_corta([R-C],R,C).
ruta_corta([R1-C1,R2-C2|Resto],R,C):- (C1 =< C2,
                                      ruta_corta([R1-C1|Resto],R,C));
                                      (C1 >= C2,
                                      ruta_corta([R2-C2|Resto],R,C)).


% Con la ayuda de los predicados calcula_rutas/3 y ruta_corta/3; dadas
% dos estaciones nos devuelve la mejor ruta y su costo.
% Los primeros dos parámetros son la estación de partida y de destino.
% El tercer parámetro es la mejor ruta.
% El cuarto parámetro es el costo de la mejor ruta.

mejor_ruta(A,B,Mejor,Costo):- calcula_rutas(A,B,Rutas),
                              ruta_corta(Rutas,Mejor,Costo).


% Este predicado elimina duplicados en una lista.
% El primer parámetro es la lista de entrada.
% El segundo parámetro es la lista sin elementos duplicados.
% Este predicado es usado para evitar que las rutas encontradas sean
% duplicadas.


eliminar_duplicados([],[]).
eliminar_duplicados([X|Lista],[X|Salida]):- \+ member(X,Lista),
                                            eliminar_duplicados(Lista,Salida).
eliminar_duplicados([X|Lista],Salida):- member(X,Lista),
                                        eliminar_duplicados(Lista,Salida).

%
% Recopila todas las mejores rutas que pueden existir entre dos
% estaciones.
% Los primeros dos parámetro son la estación de partida y de destino.
% El tercer parámetro es una lista con las mejores rutas y sus
% respectivos costos separados por un guion. Por ejemplo [[a,b,c]-3].


mejores_rutas(A,B,Resultado):- findall(R-C, mejor_ruta(A,B,R,C),Mejores),
                               eliminar_duplicados(Mejores,Resultado),!.


% Dada una lista de rutas con el costo de cada ruta, este predicado nos
% devuelve una lista con las rutas de mayor costo y el costo que estas
% tienen.
% El primer parámetro es la lista de rutas y costos separados por un
% guion.
% El segundo parámetro es la lista de rutas con mayor costo.
% El tercer parámetro es el mayor costo que se puede encontrar.
% Usamos 'menor o igual' y 'mayor o igual' debido a que pueden existir
% rutas con el mismo costo pero diferentes.


ruta_larga([R-C],R,C).
ruta_larga([R1-C1,R2-C2|Resto],R,C):- (C1 >= C2,
                                      ruta_larga([R1-C1|Resto],R,C));
                                      (C1 =< C2,
                                      ruta_larga([R2-C2|Resto],R,C)).


% Con la ayuda de los predicados calcula_rutas/3 y ruta_larga/3; dadas
% dos estaciones nos devuelve la peor ruta y su costo.
% Los primeros dos parámetros son la estación de partida y de destino.
% El tercer parámetro es la peor ruta.
% El cuarto parámetro es el costo de la peor ruta.

peor_ruta(A,B,Peor,Costo):- calcula_rutas(A,B,Rutas),
                            ruta_larga(Rutas,Peor,Costo).

% Recopila todas las peores rutas que pueden existir entre dos
% estaciones.
% Los primeros dos parámetro son la estación de partida y de destino.
% El tercer parámetro es una lista con las peores rutas y sus
% respectivos costos separados por un guion. Por ejemplo [[a,b,c]-3].
%=======================================================================

peores_rutas(A,B,Resultado):- findall(R-C, peor_ruta(A,B,R,C),Peores),
                              eliminar_duplicados(Peores,Resultado),!.


% Pregunta al usuario dos nombres de estaciones y calcula tanto la mejor
% como la pero ruta entre esas dos estaciones.
%=======================================================================

sistema_metro():- write('\nEstacion de partida\n'),
                  read(E1),
                  write('\nEstacion final\n'),
                  read(E2),
                  mejores_rutas(E1,E2,R1),
                  write('\nLa mejor ruta es\n'),
                  write(R1).
